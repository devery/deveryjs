<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      Home - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li  class="active" >
        <a href="index.html">
          
          
            <svg fill="#0095dd" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      Devery.js docs
    </h3>

    <h3>Classes</h3><ul><li id="DeveryERC721-nav"><a href="DeveryERC721.html">DeveryERC721</a><ul class='methods'><li data-type="method" id="DeveryERC721-claimProduct-nav"><a href="DeveryERC721.html#claimProduct">claimProduct</a></li><li data-type="method" id="DeveryERC721-getApproved-nav"><a href="DeveryERC721.html#getApproved">getApproved</a></li><li data-type="method" id="DeveryERC721-getProductsByOwner-nav"><a href="DeveryERC721.html#getProductsByOwner">getProductsByOwner</a></li><li data-type="method" id="DeveryERC721-setApprovalEventListener-nav"><a href="DeveryERC721.html#setApprovalEventListener">setApprovalEventListener</a></li><li data-type="method" id="DeveryERC721-setApprovalForAllEventListener-nav"><a href="DeveryERC721.html#setApprovalForAllEventListener">setApprovalForAllEventListener</a></li><li data-type="method" id="DeveryERC721-setTransferEventListener-nav"><a href="DeveryERC721.html#setTransferEventListener">setTransferEventListener</a></li><li data-type="method" id="DeveryERC721-setMaximumMintableQuantity-nav"><a href="DeveryERC721.html#setMaximumMintableQuantity">setMaximumMintableQuantity</a></li><li data-type="method" id="DeveryERC721-tokenIdToProduct-nav"><a href="DeveryERC721.html#tokenIdToProduct">tokenIdToProduct</a></li><li data-type="method" id="DeveryERC721-balanceOf-nav"><a href="DeveryERC721.html#balanceOf">balanceOf</a></li><li data-type="method" id="DeveryERC721-tokenOfOwnerByIndex-nav"><a href="DeveryERC721.html#tokenOfOwnerByIndex">tokenOfOwnerByIndex</a></li><li data-type="method" id="DeveryERC721-totalAllowedProducts-nav"><a href="DeveryERC721.html#totalAllowedProducts">totalAllowedProducts</a></li><li data-type="method" id="DeveryERC721-totalMintedProducts-nav"><a href="DeveryERC721.html#totalMintedProducts">totalMintedProducts</a></li><li data-type="method" id="DeveryERC721-safeTransferFrom-nav"><a href="DeveryERC721.html#safeTransferFrom">safeTransferFrom</a></li><li data-type="method" id="DeveryERC721-setDeveryRegistryAddress-nav"><a href="DeveryERC721.html#setDeveryRegistryAddress">setDeveryRegistryAddress</a></li><li data-type="method" id="DeveryERC721-hasAccountClaimendProduct-nav"><a href="DeveryERC721.html#hasAccountClaimendProduct">hasAccountClaimendProduct</a></li><li data-type="method" id="DeveryERC721-getSignerAddress-nav"><a href="DeveryERC721.html#getSignerAddress">getSignerAddress</a></li><li data-type="method" id="DeveryERC721-getProvider-nav"><a href="DeveryERC721.html#getProvider">getProvider</a></li></ul></li><li id="DeveryRegistry-nav"><a href="DeveryRegistry.html">DeveryRegistry</a><ul class='methods'><li data-type="method" id="DeveryRegistry-getBrand-nav"><a href="DeveryRegistry.html#getBrand">getBrand</a></li><li data-type="method" id="DeveryRegistry-addApp-nav"><a href="DeveryRegistry.html#addApp">addApp</a></li><li data-type="method" id="DeveryRegistry-updateApp-nav"><a href="DeveryRegistry.html#updateApp">updateApp</a></li><li data-type="method" id="DeveryRegistry-getApp-nav"><a href="DeveryRegistry.html#getApp">getApp</a></li><li data-type="method" id="DeveryRegistry-getAppData-nav"><a href="DeveryRegistry.html#getAppData">getAppData</a></li><li data-type="method" id="DeveryRegistry-appAccountsPaginated-nav"><a href="DeveryRegistry.html#appAccountsPaginated">appAccountsPaginated</a></li><li data-type="method" id="DeveryRegistry-appAccountsArray-nav"><a href="DeveryRegistry.html#appAccountsArray">appAccountsArray</a></li><li data-type="method" id="DeveryRegistry-appAccountsLength-nav"><a href="DeveryRegistry.html#appAccountsLength">appAccountsLength</a></li><li data-type="method" id="DeveryRegistry-setAppAddedEventListener-nav"><a href="DeveryRegistry.html#setAppAddedEventListener">setAppAddedEventListener</a></li><li data-type="method" id="DeveryRegistry-setAppUpdatedEventListener-nav"><a href="DeveryRegistry.html#setAppUpdatedEventListener">setAppUpdatedEventListener</a></li><li data-type="method" id="DeveryRegistry-addBrand-nav"><a href="DeveryRegistry.html#addBrand">addBrand</a></li><li data-type="method" id="DeveryRegistry-updateBrand-nav"><a href="DeveryRegistry.html#updateBrand">updateBrand</a></li><li data-type="method" id="DeveryRegistry-getBrandData-nav"><a href="DeveryRegistry.html#getBrandData">getBrandData</a></li><li data-type="method" id="DeveryRegistry-brandAccountsPaginated-nav"><a href="DeveryRegistry.html#brandAccountsPaginated">brandAccountsPaginated</a></li><li data-type="method" id="DeveryRegistry-brandAccountsArray-nav"><a href="DeveryRegistry.html#brandAccountsArray">brandAccountsArray</a></li><li data-type="method" id="DeveryRegistry-brandAccountsLength-nav"><a href="DeveryRegistry.html#brandAccountsLength">brandAccountsLength</a></li><li data-type="method" id="DeveryRegistry-setBrandAddedEventListener-nav"><a href="DeveryRegistry.html#setBrandAddedEventListener">setBrandAddedEventListener</a></li><li data-type="method" id="DeveryRegistry-setBrandUpdatedEventListener-nav"><a href="DeveryRegistry.html#setBrandUpdatedEventListener">setBrandUpdatedEventListener</a></li><li data-type="method" id="DeveryRegistry-addProduct-nav"><a href="DeveryRegistry.html#addProduct">addProduct</a></li><li data-type="method" id="DeveryRegistry-updateProduct-nav"><a href="DeveryRegistry.html#updateProduct">updateProduct</a></li><li data-type="method" id="DeveryRegistry-getProduct-nav"><a href="DeveryRegistry.html#getProduct">getProduct</a></li><li data-type="method" id="DeveryRegistry-getProductData-nav"><a href="DeveryRegistry.html#getProductData">getProductData</a></li><li data-type="method" id="DeveryRegistry-productAccountsPaginated-nav"><a href="DeveryRegistry.html#productAccountsPaginated">productAccountsPaginated</a></li><li data-type="method" id="DeveryRegistry-productAccountsArray-nav"><a href="DeveryRegistry.html#productAccountsArray">productAccountsArray</a></li><li data-type="method" id="DeveryRegistry-productAccountsLength-nav"><a href="DeveryRegistry.html#productAccountsLength">productAccountsLength</a></li><li data-type="method" id="DeveryRegistry-setProductAddedEventListener-nav"><a href="DeveryRegistry.html#setProductAddedEventListener">setProductAddedEventListener</a></li><li data-type="method" id="DeveryRegistry-setProductUpdatedEventListener-nav"><a href="DeveryRegistry.html#setProductUpdatedEventListener">setProductUpdatedEventListener</a></li><li data-type="method" id="DeveryRegistry-permissionMarker-nav"><a href="DeveryRegistry.html#permissionMarker">permissionMarker</a></li><li data-type="method" id="DeveryRegistry-addressHash-nav"><a href="DeveryRegistry.html#addressHash">addressHash</a></li><li data-type="method" id="DeveryRegistry-mark-nav"><a href="DeveryRegistry.html#mark">mark</a></li><li data-type="method" id="DeveryRegistry-AddProductAndMark-nav"><a href="DeveryRegistry.html#AddProductAndMark">AddProductAndMark</a></li><li data-type="method" id="DeveryRegistry-check-nav"><a href="DeveryRegistry.html#check">check</a></li><li data-type="method" id="DeveryRegistry-setPermissionedEventListener-nav"><a href="DeveryRegistry.html#setPermissionedEventListener">setPermissionedEventListener</a></li><li data-type="method" id="DeveryRegistry-setMarkedEventListener-nav"><a href="DeveryRegistry.html#setMarkedEventListener">setMarkedEventListener</a></li><li data-type="method" id="DeveryRegistry-getSignerAddress-nav"><a href="DeveryRegistry.html#getSignerAddress">getSignerAddress</a></li><li data-type="method" id="DeveryRegistry-getProvider-nav"><a href="DeveryRegistry.html#getProvider">getProvider</a></li></ul></li><li id="Utils-nav"><a href="Utils.html">Utils</a><ul class='methods'><li data-type="method" id="Utils-isAddress-nav"><a href="Utils.html#.isAddress">isAddress</a></li><li data-type="method" id="Utils-isChecksumAddress-nav"><a href="Utils.html#.isChecksumAddress">isChecksumAddress</a></li><li data-type="method" id="Utils-getRandomAddress-nav"><a href="Utils.html#.getRandomAddress">getRandomAddress</a></li><li data-type="method" id="Utils-sha3-nav"><a href="Utils.html#.sha3">sha3</a></li></ul></li><li id="DeveryAdmined-nav"><a href="DeveryAdmined.html">DeveryAdmined</a><ul class='methods'><li data-type="method" id="DeveryAdmined-isAdmin-nav"><a href="DeveryAdmined.html#isAdmin">isAdmin</a></li><li data-type="method" id="DeveryAdmined-addAdmin-nav"><a href="DeveryAdmined.html#addAdmin">addAdmin</a></li><li data-type="method" id="DeveryAdmined-removeAdmin-nav"><a href="DeveryAdmined.html#removeAdmin">removeAdmin</a></li><li data-type="method" id="DeveryAdmined-setAdminAddedEventListener-nav"><a href="DeveryAdmined.html#setAdminAddedEventListener">setAdminAddedEventListener</a></li><li data-type="method" id="DeveryAdmined-setAdminRemovedEventListener-nav"><a href="DeveryAdmined.html#setAdminRemovedEventListener">setAdminRemovedEventListener</a></li><li data-type="method" id="DeveryAdmined-getSignerAddress-nav"><a href="DeveryAdmined.html#getSignerAddress">getSignerAddress</a></li><li data-type="method" id="DeveryAdmined-getProvider-nav"><a href="DeveryAdmined.html#getProvider">getProvider</a></li></ul></li><li id="DeveryOwned-nav"><a href="DeveryOwned.html">DeveryOwned</a><ul class='methods'><li data-type="method" id="DeveryOwned-acceptOwnership-nav"><a href="DeveryOwned.html#acceptOwnership">acceptOwnership</a></li><li data-type="method" id="DeveryOwned-transferOwnership-nav"><a href="DeveryOwned.html#transferOwnership">transferOwnership</a></li><li data-type="method" id="DeveryOwned-setOwnershipTransferredListener-nav"><a href="DeveryOwned.html#setOwnershipTransferredListener">setOwnershipTransferredListener</a></li><li data-type="method" id="DeveryOwned-getOwner-nav"><a href="DeveryOwned.html#getOwner">getOwner</a></li><li data-type="method" id="DeveryOwned-getNewOwner-nav"><a href="DeveryOwned.html#getNewOwner">getNewOwner</a></li><li data-type="method" id="DeveryOwned-getSignerAddress-nav"><a href="DeveryOwned.html#getSignerAddress">getSignerAddress</a></li><li data-type="method" id="DeveryOwned-getProvider-nav"><a href="DeveryOwned.html#getProvider">getProvider</a></li></ul></li><li id="EveToken-nav"><a href="EveToken.html">EveToken</a><ul class='methods'><li data-type="method" id="EveToken-totalSupply-nav"><a href="EveToken.html#totalSupply">totalSupply</a></li><li data-type="method" id="EveToken-balanceOf-nav"><a href="EveToken.html#balanceOf">balanceOf</a></li><li data-type="method" id="EveToken-allowance-nav"><a href="EveToken.html#allowance">allowance</a></li><li data-type="method" id="EveToken-approve-nav"><a href="EveToken.html#approve">approve</a></li><li data-type="method" id="EveToken-transfer-nav"><a href="EveToken.html#transfer">transfer</a></li><li data-type="method" id="EveToken-transferFrom-nav"><a href="EveToken.html#transferFrom">transferFrom</a></li><li data-type="method" id="EveToken-setApprovalListener-nav"><a href="EveToken.html#setApprovalListener">setApprovalListener</a></li><li data-type="method" id="EveToken-setTransferListener-nav"><a href="EveToken.html#setTransferListener">setTransferListener</a></li><li data-type="method" id="EveToken-getSignerAddress-nav"><a href="EveToken.html#getSignerAddress">getSignerAddress</a></li><li data-type="method" id="EveToken-getProvider-nav"><a href="EveToken.html#getProvider">getProvider</a></li></ul></li><li id="AbstractSmartContract-nav"><a href="AbstractSmartContract.html">AbstractSmartContract</a><ul class='methods'><li data-type="method" id="AbstractSmartContract-getSignerAddress-nav"><a href="AbstractSmartContract.html#getSignerAddress">getSignerAddress</a></li><li data-type="method" id="AbstractSmartContract-getProvider-nav"><a href="AbstractSmartContract.html#getProvider">getProvider</a></li></ul></li><li id="AbstractDeverySmartContract-nav"><a href="AbstractDeverySmartContract.html">AbstractDeverySmartContract</a><ul class='methods'><li data-type="method" id="AbstractDeverySmartContract-getSignerAddress-nav"><a href="AbstractDeverySmartContract.html#getSignerAddress">getSignerAddress</a></li><li data-type="method" id="AbstractDeverySmartContract-getProvider-nav"><a href="AbstractDeverySmartContract.html#getProvider">getProvider</a></li></ul></li></ul><h3 id="global-nav"><a href="global.html">Global</a></h3>
  </nav>

  <div id="main">
    

    
      



    

      


  <section class="readme">
    <article>
      <h1>Devery.js</h1><p><a href="https://badge.fury.io/js/%40devery%2Fdevery"><img src="https://badge.fury.io/js/%40devery%2Fdevery.svg" alt="npm version"></a>
<a href="https://coveralls.io/github/devery/deveryjs"><img src="https://coveralls.io/repos/github/devery/deveryjs/badge.svg" alt="Coverage Status"></a>
<a href="https://travis-ci.org/devery/deveryjs"><img src="https://travis-ci.org/devery/deveryjs.svg?branch=master" alt="Build Status"></a></p>
<p>Javascript library for the Devery protocol.</p>
<p>You can check the full documentation with examples here <a href="https://devery.github.io/deveryjs/">==&gt; Devery.js documentation</a>.</p>
<h2>Installation:</h2><p>The installation process is quite simple - you just need to install it using NPM or YARN.</p>
<pre class="prettyprint source"><code>npm install --save @devery/devery</code></pre><p>That's it - now you can start using devery.js inside your app.</p>
<h2>Importing:</h2><p>You can use <code>require</code> or <code>import</code> like syntax to access devery classes</p>
<ol>
<li><p><code>require</code> like syntax:</p>
<pre class="prettyprint source lang-javascript"><code> const devery = require('@devery/devery');
 const DeveryRegistry = devery.DeveryRegistry;

 let deveryRegistryClient = new DeveryRegistry();</code></pre><p>or alternatively you can use this.</p>
</li>
<li><p>ES6 import syntax:</p>
<pre class="prettyprint source lang-javascript"><code> import {DeveryRegistry} from '@devery/devery';

 let deveryRegistryClient = new DeveryRegistry();</code></pre></li>
</ol>
<h2>Simple usage example</h2><p><strong>Important</strong> Read the permissioning session, to be aware of possible gotchas and pitfalls.</p>
<ol>
<li><p>Checking if a product has been marked.</p>
<pre class="prettyprint source lang-javascript"><code>   // first you need to get a <a href="DeveryRegistry.html">DeveryRegistry</a> instance
   let deveryRegistryClient = new DeveryRegistry();

   // check product by specified address
   deveryRegistryClient.check(&quot;0x627306090abaB3A6e1400e9345bC60c78a8BEf57&quot;).then(item => {
        console.log('product brand',item.brandAccount);
        // other stuff
   });

   // or with the async syntax

   async function foo() {
            let item = await deveryRegistryClient.check(&quot;0x627306090abaB3A6e1400e9345bC60c78a8BEf57&quot;)
            console.log('product brand',item.brandAccount);
   }</code></pre></li>
</ol>
<h2>Access to the ethereum network</h2><p>Devery.js will try to automatically get the web3 object instance presented in your context(page, app etc). If this is
not possible then it will fallback to a read only provider pointing to the main network. As the fallback does not contain
a signer you will not be able to perform write operations.</p>
<h2>Permissioning</h2><h3>web3 permissioning</h3><p>Metamask requires you to give permission to your app by default. So it's very important to call <code>web3.currentProvider.enable()</code> to open Metamask permission window. It's a good idea to safeguard your code for the case when web3 is not presented. One example of how to request these permissions safely would be:</p>
<pre class="prettyprint source lang-javascript"><code>// init metamask
try {
  if (web3 && web3.currentProvider && web3.currentProvider.isMetaMask) {
    // TODO: move this to deveryjs
    web3.currentProvider.enable();
  }
} 
catch(e) {
    // Handle exceptions here
}
</code></pre><p>If you don't do this you will not be able to interact with the contracts using Metamask.</p>
<h3>Fee charge permissions</h3><p>Some operations may charge a fee from the message sender. Example of these transactions is marking a product and claiming a token for a marked item. The contracts that charge these fees need your permission, you can pre approve these transfers by calling the <code>approve</code> <a href="https://devery.github.io/deveryjs/EveToken.html">EveToken</a>.</p>
<p>Here's a full example on how to check the current allowance and try to increase the approval if it's bellow a certain number </p>
<pre class="prettyprint source lang-javascript"><code>export async function checkAndUpdateAllowance (address, minAllowance , total) {
  try {
    // creates a new eve token instance
    let eveTokenClient = new EveToken();
    // get the current ethereum network connection provider
    let provider = eveTokenClient.getProvider();
    // check the current allowance for the requested contract
    let currentAllowance = await eveToken.allowance(web3.eth.accounts[0], address);
    // we need to do the division by 10e17 because devery token uses the base 18
    if(parseFloat(currentAllowance.toString()) / 10e17 &lt; minAllowance) {
        // here in the approve function we need to add the 17 0s for the same reason
        let txn = await eveTokenClient.approve(address, total + '000000000000000000');
        await provider.provider.waitForTransaction(txn.hash);
    }

  } catch (e) {
      // Add your exception handling here
  }
}

// checks and approves the allowance for the deveryRegistry contract
checkAndUpdateAllowance('0x0364a98148b7031451e79b93449b20090d79702a',40,100);

// checks and approves the allowance for the deveryErc721 contract
checkAndUpdateAllowance('0x032ef0359eb068d3dddd6e91021c02f397afce5a',40,100);
</code></pre><p>This example would check and approve the allowance for both transactions (marking and claiming tokens) in the live network, you can always improve and change the code to fit your needs.</p>
<h2>Main Classes documentation.</h2><ol>
<li><a href="https://devery.github.io/deveryjs/DeveryRegistry.html">DeveryRegistry</a></li>
<li><a href="https://devery.github.io/deveryjs/DeveryERC721.html">DeveryERC721</a></li>
<li><a href="https://devery.github.io/deveryjs/EveToken.html">EveToken</a></li>
</ol>
    </article>
  </section>


    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  
  
</body>
</html>